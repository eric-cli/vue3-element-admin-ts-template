var te=Object.defineProperty;var A=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var S=(i,u,s)=>u in i?te(i,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[u]=s,y=(i,u)=>{for(var s in u||(u={}))oe.call(u,s)&&S(i,s,u[s]);if(A)for(var s of A(u))ae.call(u,s)&&S(i,s,u[s]);return i};import{a as le,r as c,c as j,D as ne,m as se,g as m,o as p,j as I,h as o,w as l,af as h,b,l as w,F as ue,v as re,u as E,ao as ie,ag as de,x as me,M as D,O as v,aY as ce,V as pe,aD as _e,J as fe,K as ve,aG as ge,aZ as Ve,a_ as ye,L as he,aC as be,aE as we,a$ as Ee}from"./vendor.a1ba0c3f.js";/* empty css                *//* empty css                  */import{_ as De}from"./index.d0ac70c2.js";/* empty css                        *//* empty css            */import{f as Fe}from"./article.ee3f6b9a.js";import{s as xe}from"./remote-search.57585707.js";import{_ as Ue,d as Be,e as Ce}from"./index.a4f62dd8.js";const Ae={class:"createPost-container"},Se=D(" Publish "),je=D(" Draft "),Ie={class:"createPost-main-container"},ke=D(" Title "),Pe={class:"postInfo-container"},Re=le({props:{isEdit:{type:Boolean,default:!1}},setup(i){const u=i,s=c();Be();const k={status:"draft",title:"",content:"",content_short:"",source_uri:"",image_uri:"",display_time:new Date,id:void 0,platforms:["a-platform"],comment_disabled:!1,importance:0},t=c(y({},k)),_=c(!1),F=c([]),g=(n,e,r)=>{e===""?(v({message:`${n.field}\u4E3A\u5FC5\u4F20\u9879`,type:"error"}),r(new Error(`${n.field}\u4E3A\u5FC5\u4F20\u9879`))):r()},P=c({image_uri:[{validator:g}],title:[{validator:g}],content:[{validator:g}],source_uri:[{validator:(n,e,r)=>{e?Ce(e)?r():(v({message:"\u5916\u94FEurl\u586B\u5199\u4E0D\u6B63\u786E",type:"error"}),r(new Error("\u5916\u94FEurl\u586B\u5199\u4E0D\u6B63\u786E"))):r()},trigger:"blur"}]}),R=c({}),x=j(()=>t.value.content_short.length),V=j({get(){return+new Date(t.value.display_time)},set(n){t.value.display_time=new Date(n)}}),L=n=>{Fe(n).then(e=>{t.value=e.data,t.value.title+=`   Article Id:${t.value.id}`,t.value.content_short+=`   Article Id:${t.value.id}`}).catch(e=>{console.log(e)})},M=()=>{if(t.value.content.length===0||t.value.title.length===0){v({message:"\u8BF7\u586B\u5199\u5FC5\u8981\u7684\u6807\u9898\u548C\u5185\u5BB9",type:"warning"});return}v({message:"\u4FDD\u5B58\u6210\u529F",type:"success",showClose:!0,duration:1e3}),t.value.status="draft"},$=n=>{xe(n).then(e=>{!e.data.items||(F.value=e.data.items.map(r=>r.name))})},T=n=>{!n||n.validate(e=>e?(_.value=!0,ce({title:"\u6210\u529F",message:"\u53D1\u5E03\u6587\u7AE0\u6210\u529F",type:"success",duration:2e3}),t.value.status="published",_.value=!1,!0):(console.log("error submit!"),!1))};return ne(()=>{const n=se();if(u.isEdit){const e=n.params&&n.params.id;L(e)}R.value=y({},n)}),(n,e)=>{const r=m("CommentDropdown"),N=m("PlatformDropdown"),O=m("SourceUrlDropdown"),U=pe,q=m("sticky"),z=m("Warning"),H=m("MDinput"),d=_e,W=fe,G=ve,f=ge,J=Ve,K=ye,B=he,Y=be,Z=De,Q=m("Upload"),X=we,C=Ee;return p(),I("div",Ae,[o(X,{ref_key:"postForm",ref:s,model:t.value,rules:P.value,class:"form-container"},{default:l(()=>[o(q,{"z-index":10,"class-name":"sub-navbar "+t.value.status},{default:l(()=>[o(r,{modelValue:t.value.comment_disabled,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.comment_disabled=a)},null,8,["modelValue"]),o(N,{modelValue:t.value.platforms,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.platforms=a)},null,8,["modelValue"]),o(O,{modelValue:t.value.source_uri,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.source_uri=a)},null,8,["modelValue"]),h((p(),b(U,{style:{"margin-left":"10px"},type:"success",onClick:e[3]||(e[3]=a=>T(s.value))},{default:l(()=>[Se]),_:1})),[[C,_.value]]),h((p(),b(U,{type:"warning",onClick:M},{default:l(()=>[je]),_:1})),[[C,_.value]])]),_:1},8,["class-name"]),w("div",Ie,[o(B,null,{default:l(()=>[o(z),o(f,{span:24},{default:l(()=>[o(d,{style:{"margin-bottom":"40px"},prop:"title"},{default:l(()=>[o(H,{modelValue:t.value.title,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.title=a),maxlength:100,name:"name",required:""},{default:l(()=>[ke]),_:1},8,["modelValue"])]),_:1}),w("div",Pe,[o(B,null,{default:l(()=>[o(f,{span:8},{default:l(()=>[o(d,{"label-width":"60px",label:"Author:",class:"postInfo-container-item"},{default:l(()=>[o(G,{modelValue:t.value.author,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.author=a),"remote-method":$,filterable:"","default-first-option":"",remote:"",placeholder:"Search user"},{default:l(()=>[(p(!0),I(ue,null,re(F.value,(a,ee)=>(p(),b(W,{key:a+ee,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(f,{span:10},{default:l(()=>[o(d,{"label-width":"120px",label:"Publish Time:",class:"postInfo-container-item"},{default:l(()=>[o(J,{modelValue:E(V),"onUpdate:modelValue":e[6]||(e[6]=a=>ie(V)?V.value=a:null),type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"Select date and time"},null,8,["modelValue"])]),_:1})]),_:1}),o(f,{span:6},{default:l(()=>[o(d,{"label-width":"90px",label:"Importance:",class:"postInfo-container-item"},{default:l(()=>[o(K,{modelValue:t.value.importance,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.importance=a),max:3,colors:["#99A9BF","#F7BA2A","#FF9900"],"low-threshold":1,"high-threshold":3,style:{display:"inline-block"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),o(d,{style:{"margin-bottom":"40px"},"label-width":"70px",label:"Summary:"},{default:l(()=>[o(Y,{modelValue:t.value.content_short,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.content_short=a),rows:1,type:"textarea",class:"article-textarea",autosize:"",placeholder:"Please enter the content"},null,8,["modelValue"]),h(w("span",{class:"word-counter"},me(E(x))+"words",513),[[de,E(x)]])]),_:1}),o(d,{prop:"content",style:{"margin-bottom":"30px"}},{default:l(()=>[o(Z,{ref:"editor",modelValue:t.value.content,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.content=a),height:400},null,8,["modelValue"])]),_:1}),o(d,{prop:"image_uri",style:{"margin-bottom":"30px"}},{default:l(()=>[o(Q,{modelValue:t.value.image_uri,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.image_uri=a)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])}}});var Je=Ue(Re,[["__scopeId","data-v-23884c7d"]]);export{Je as A};
