var te=Object.defineProperty;var C=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var S=(i,u,s)=>u in i?te(i,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[u]=s,y=(i,u)=>{for(var s in u||(u={}))oe.call(u,s)&&S(i,s,u[s]);if(C)for(var s of C(u))le.call(u,s)&&S(i,s,u[s]);return i};import{a as ae,r as c,c as j,D as ne,m as se,g as m,o as p,j as I,h as o,w as a,af as b,b as h,l as w,F as ue,v as re,u as E,ao as ie,ag as de,x as me,M as F,O as v,a$ as ce,V as pe,aG as _e,J as fe,K as ve,aJ as ge,b0 as Ve,b1 as ye,L as be,aF as he,aH as we,b2 as Ee}from"./vendor.00b81b82.js";/* empty css                *//* empty css                  */import{_ as Fe}from"./index.de90f3c1.js";/* empty css                        *//* empty css            */import{f as De}from"./article.f7710d39.js";import{s as xe}from"./remote-search.1f45f900.js";import{_ as Ue,d as Be,e as Ae}from"./index.c192a148.js";const Ce={class:"createPost-container"},Se=F(" Publish "),je=F(" Draft "),Ie={class:"createPost-main-container"},ke=F(" Title "),Pe={class:"postInfo-container"},Re=ae({props:{isEdit:{type:Boolean,default:!1}},setup(i){const u=i,s=c();Be();const k={status:"draft",title:"",content:"",content_short:"",source_uri:"",image_uri:"",display_time:new Date,id:void 0,platforms:["a-platform"],comment_disabled:!1,importance:0},t=c(y({},k)),_=c(!1),D=c([]),g=(n,e,r)=>{e===""?(v({message:`${n.field}\u4E3A\u5FC5\u4F20\u9879`,type:"error"}),r(new Error(`${n.field}\u4E3A\u5FC5\u4F20\u9879`))):r()},P=c({image_uri:[{validator:g}],title:[{validator:g}],content:[{validator:g}],source_uri:[{validator:(n,e,r)=>{e?Ae(e)?r():(v({message:"\u5916\u94FEurl\u586B\u5199\u4E0D\u6B63\u786E",type:"error"}),r(new Error("\u5916\u94FEurl\u586B\u5199\u4E0D\u6B63\u786E"))):r()},trigger:"blur"}]}),R=c({}),x=j(()=>t.value.content_short.length),V=j({get(){return+new Date(t.value.display_time)},set(n){t.value.display_time=new Date(n)}}),L=n=>{De(n).then(e=>{t.value=e.data,t.value.title+=`   Article Id:${t.value.id}`,t.value.content_short+=`   Article Id:${t.value.id}`}).catch(e=>{console.log(e)})},M=()=>{if(t.value.content.length===0||t.value.title.length===0){v({message:"\u8BF7\u586B\u5199\u5FC5\u8981\u7684\u6807\u9898\u548C\u5185\u5BB9",type:"warning"});return}v({message:"\u4FDD\u5B58\u6210\u529F",type:"success",showClose:!0,duration:1e3}),t.value.status="draft"},$=n=>{xe(n).then(e=>{!e.data.items||(D.value=e.data.items.map(r=>r.name))})},T=n=>{!n||n.validate(e=>e?(_.value=!0,ce({title:"\u6210\u529F",message:"\u53D1\u5E03\u6587\u7AE0\u6210\u529F",type:"success",duration:2e3}),t.value.status="published",_.value=!1,!0):(console.log("error submit!"),!1))};return ne(()=>{const n=se();if(u.isEdit){const e=n.params&&n.params.id;L(e)}R.value=y({},n)}),(n,e)=>{const r=m("CommentDropdown"),N=m("PlatformDropdown"),H=m("SourceUrlDropdown"),U=pe,O=m("sticky"),q=m("Warning"),z=m("MDinput"),d=_e,J=fe,W=ve,f=ge,G=Ve,K=ye,B=be,Q=he,X=Fe,Y=m("Upload"),Z=we,A=Ee;return p(),I("div",Ce,[o(Z,{ref_key:"postForm",ref:s,model:t.value,rules:P.value,class:"form-container"},{default:a(()=>[o(O,{"z-index":10,"class-name":"sub-navbar "+t.value.status},{default:a(()=>[o(r,{modelValue:t.value.comment_disabled,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.comment_disabled=l)},null,8,["modelValue"]),o(N,{modelValue:t.value.platforms,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.platforms=l)},null,8,["modelValue"]),o(H,{modelValue:t.value.source_uri,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.source_uri=l)},null,8,["modelValue"]),b((p(),h(U,{style:{"margin-left":"10px"},type:"success",onClick:e[3]||(e[3]=l=>T(s.value))},{default:a(()=>[Se]),_:1})),[[A,_.value]]),b((p(),h(U,{type:"warning",onClick:M},{default:a(()=>[je]),_:1})),[[A,_.value]])]),_:1},8,["class-name"]),w("div",Ie,[o(B,null,{default:a(()=>[o(q),o(f,{span:24},{default:a(()=>[o(d,{style:{"margin-bottom":"40px"},prop:"title"},{default:a(()=>[o(z,{modelValue:t.value.title,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.title=l),maxlength:100,name:"name",required:""},{default:a(()=>[ke]),_:1},8,["modelValue"])]),_:1}),w("div",Pe,[o(B,null,{default:a(()=>[o(f,{span:8},{default:a(()=>[o(d,{"label-width":"60px",label:"Author:",class:"postInfo-container-item"},{default:a(()=>[o(W,{modelValue:t.value.author,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.author=l),"remote-method":$,filterable:"","default-first-option":"",remote:"",placeholder:"Search user"},{default:a(()=>[(p(!0),I(ue,null,re(D.value,(l,ee)=>(p(),h(J,{key:l+ee,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(f,{span:10},{default:a(()=>[o(d,{"label-width":"120px",label:"Publish Time:",class:"postInfo-container-item"},{default:a(()=>[o(G,{modelValue:E(V),"onUpdate:modelValue":e[6]||(e[6]=l=>ie(V)?V.value=l:null),type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"Select date and time"},null,8,["modelValue"])]),_:1})]),_:1}),o(f,{span:6},{default:a(()=>[o(d,{"label-width":"90px",label:"Importance:",class:"postInfo-container-item"},{default:a(()=>[o(K,{modelValue:t.value.importance,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.importance=l),max:3,colors:["#99A9BF","#F7BA2A","#FF9900"],"low-threshold":1,"high-threshold":3,style:{display:"inline-block"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),o(d,{style:{"margin-bottom":"40px"},"label-width":"70px",label:"Summary:"},{default:a(()=>[o(Q,{modelValue:t.value.content_short,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.content_short=l),rows:1,type:"textarea",class:"article-textarea",autosize:"",placeholder:"Please enter the content"},null,8,["modelValue"]),b(w("span",{class:"word-counter"},me(E(x))+"words",513),[[de,E(x)]])]),_:1}),o(d,{prop:"content",style:{"margin-bottom":"30px"}},{default:a(()=>[o(X,{ref:"editor",modelValue:t.value.content,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.content=l),height:400},null,8,["modelValue"])]),_:1}),o(d,{prop:"image_uri",style:{"margin-bottom":"30px"}},{default:a(()=>[o(Y,{modelValue:t.value.image_uri,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.image_uri=l)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])}}});var Ge=Ue(Re,[["__scopeId","data-v-23884c7d"]]);export{Ge as A};
